const h=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}};h();function s(){return window.innerWidth<=800&&window.innerHeight<=930}const p={desktop:{"account-setup":{height:"334px",width:"375px"},timeline:{height:"595px",width:"375px"}},mobile:{"account-setup":{height:"100vh",width:"100vw"},timeline:{height:"100vh",width:"100vw"}}};function c(e,o){const t=document.querySelector(".chatterbox-iframe"),r=document.querySelector(".start");if(t.style.display!=="none"&&o){t.contentWindow.postMessage({action:"minimize",id:e},"*"),t.contentWindow.postMessage({action:"maximize",id:e},"*");return}t.style.display!=="none"?(t.style.display="none",document.querySelector(".start-chat-btn").classList.remove("start-background-minimized"),t.contentWindow.postMessage({action:"minimize",id:e},"*"),s()&&(r.style.display="block")):(t.contentWindow.postMessage({action:"maximize",id:e},"*"),t.style.display="block",document.querySelector(".start-chat-btn").classList.add("start-backgrocund-minimized"),s()&&(r.style.display="none"))}function b(e){const{view:o}=e,t=s()?"mobile":"desktop",r=p[t][o];if(!r)return;const{height:n,width:i}=r,a=document.querySelector(".chatterbox-iframe");n&&(a.style.height=n),i&&(a.style.width=i)}function w(){const e=document.querySelector(".chatterbox-iframe");e==null||e.remove(),document.querySelector(".start").remove()}const d=document.querySelector("#chatterbox-script").src,x=new URL(d).origin,l=new URL(d).pathname.split("/");let u=l.length>1?`${l[1]}/`:"";(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&(u="../");function g(){I();const e=document.createElement("div");e.className="start";const o=m({id:"!YqbFfpfckwkARoUfYc:matrix.org",name:"Blurzade"}),t=m({id:"!vItKLiveJxzwiDjAEl:matrix.org",name:"James"});e.appendChild(o),e.appendChild(t),document.body.appendChild(e),window.localStorage.getItem("chatterbox-should-load-in-background")&&(f(!0),c())}function m({id:e,name:o}){const t=document.createElement("button");return t.className="start-chat-btn",t.innerHTML=`Start chat with ${o}`,t.setAttribute("aria-label",`Start chat  ${o}`),t.onclick=()=>{const r=!!e&&!!window.INITIAL_ID&&e!==window.INITIAL_ID;window.INITIAL_ID=e,window.isIframeLoaded?c(e,r):f()},t.appendChild(y()),t}function y(){const e=document.createElement("span");return e.className="notification-badge hidden",e}function I(){const e=document.createElement("link");e.rel="stylesheet",e.href=new URL("parent.124b0bf1.css",d).href,console.log("linkElement.href",e.href),document.head.appendChild(e)}function f(e=!1,o){const t=document.createElement("iframe"),r=window.CHATTERBOX_CONFIG_LOCATION;if(!r)throw new Error("CHATTERBOX_CONFIG_LOCATION is not set");t.src=new URL(`${u}chatterbox.html?config=${r}${e?"&minimized=true":""}`,x).href,t.className="chatterbox-iframe",document.body.appendChild(t),window.isIframeLoaded=!0,document.querySelector(".start-chat-btn").classList.add("start-background-minimized"),s()&&(document.querySelector(".start").style.display="none"),o==null||o()}window.isIframeLoaded=!1;window.__chatterbox=()=>{var e;return(e=document.querySelector(".chatterbox-iframe"))==null?void 0:e.contentWindow};function L(e){const o=document.querySelector(".notification-badge");e===0?o.classList.add("hidden"):(o.innerText=e,o.classList.remove("hidden"))}window.addEventListener("message",e=>{const{action:o,id:t}=e.data;switch(o){case"resize-iframe":e.data.view==="timeline"&&window.localStorage.setItem("chatterbox-should-load-in-background","true"),b(e.data);break;case"minimize":c(t);break;case"unread-message":L(e.data.count);break;case"error":w();break}});g();
